<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WhatsApp Bot ~ Uday</title>
    <link rel="shortcut icon" href="./public/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="./public/styles.css">
    <!-- <script type="text/javascript" src="https://cdn.rawgit.com/davidshimjs/qrcodejs/gh-pages/qrcode.min.js"></script> -->
    <script src = "/socket.io/socket.io.js"></script>
    
</head>
<body>
    <div class="container">
        <h2 class="text">WhatsApp Web Bot</h2>
        <p class="small_text">~ by UdayKiran</p>
        <div class="contact_icons">
            <a href="https://wa.me/+919381400582?text=Hi Uday.." target="_blank">
                <i class="bi bi-whatsapp"></i>
            </a>
            <a href="https://www.instagram.com/sweet_lover_uday/" target="_blank">
                <i class="bi bi-instagram"></i>
            </a>
            <a href="https://www.linkedin.com/in/udaykiranbandarugalla/" target="_blank">
                <i class="bi bi-linkedin"></i>
            </a>
            <a href="https://github.com/udaykirancodes" target="_blank">
                <i class="bi bi-github"></i>
            </a>
        </div>
        <div class="qr_code" id="qr_code">
            <img src="./public/snap.jpg" class="image" alt="QR CODE">
        </div>
        <div class="status">
            <p class="status_text"></p>
        </div>
        <div class="box_container">
            <div class="box">
                <p class="box_head">Personal Messages</p>
                <p class="box_body" id="personal">192</p>
            </div>
            <div class="box">
                <p class="box_head">Birthday Wishes</p>
                <p class="box_body" id="wishes">25</p>
            </div>
            <div class="box">
                <p class="box_head">Group Messages</p>
                <p class="box_body" id="group">192</p>
            </div>
        </div>
    </div>

    <script>
        const socket = io.connect();

        const status_text = document.querySelector('.status_text'); 
        const image = document.querySelector('.image');
        
        socket.on('notification',(notification)=>{
            status_text.innerHTML = notification ;
            setTimeout(() => {
                status_text.innerHTML = '...';
            }, 3000); 
        })
        socket.on('message',(text)=>{
            status_text.innerHTML = text;
            setTimeout(() => {
                status_text.innerHTML = '...';
            }, 3000);  
        })
        socket.on('qrcode',(code)=>{
            image.src = code; 
        })
        socket.on('connected',(code)=>{
            image.src = './public/snap.jpg'; 
        })
     </script>
</body>
</html>